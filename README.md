# ADS Custom Integration for Home Assistant

[![hacs_badge](https://img.shields.io/badge/HACS-Custom-41BDF5.svg)](https://github.com/hacs/integration)

Connect Home Assistant to Beckhoff TwinCAT PLCs over the **ADS (Automation Device Specification)** protocol. The integration pushes state changes in real time â€” no polling required.

> **Disclaimer:** This project, including its code and documentation, was mostly generated by AI.

| | |
|---|---|
| **Domain** | `ads_custom` |
| **IoT class** | Local Push |
| **Minimum HA** | 2024.1.0 |
| **HACS** | Custom repository |

## How it differs from the core ADS integration

Home Assistant ships a built-in `ads` integration. This custom integration (`ads_custom`) can run alongside it and offers several improvements:

| Feature | Core `ads` | `ads_custom` |
|---------|-----------|-------------|
| Non-standard dimmable lights with BYTE brightness variable| Requires a sensor, binary sensor, switch, **and** a template light (4 entities) | Single `light` entity with native BYTE brightness variable support |
| Brightness data type | No direct PLC byte support (only UINT) | BYTE (0-255) or UINT with configurable scale (e.g. 0-100) |
| Configuration | YAML only | **UI** or **YAML**

Because the domain is `ads_custom`, both integrations can coexist in the same Home Assistant instance without conflict.

## Installation

### HACS (recommended)

[![Open your Home Assistant instance and open a repository inside the Home Assistant Community Store.](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=Aaroneisele55&repository=homeassistant-ads&category=integration)

### Manual

Copy the `custom_components/ads_custom` folder into your Home Assistant `custom_components/` directory, then restart.

## Getting started

### Prerequisites

- A Beckhoff TwinCAT 2 or TwinCAT 3 PLC reachable on the network.
- An AMS route configured on the PLC that points back to the Home Assistant host.
- Firewall rules that allow UDP port 48899 and the AMS port (default 48898).

### Option A â€“ UI setup

1. Go to **Settings â†’ Devices & Services â†’ Add Integration**.
2. Search for **ADS Custom** and enter the AMS Net ID (e.g. `192.168.1.100.1.1`), an optional IP address, and the AMS port.
3. After the connection succeeds, click **Configure â†’ Add Entity** to create switches, sensors, binary sensors, or lights directly in the UI â€” no restart needed.

### Option B â€“ YAML setup
This integration is fully compatible with YAML configurations created for the core `ads` integration. Just change the domain to `ads_custom` and it will work!
```yaml
# configuration.yaml
ads_custom:
  device: "192.168.1.100.1.1"
  ip_address: "192.168.1.100"   # optional
  port: 48898                    # optional, default 48898

sensor:
  - platform: ads_custom
    adsvar: GVL.temperature
    name: Room Temperature
    adstype: real
    unit_of_measurement: "Â°C"
    device_class: temperature
    state_class: measurement

switch:
  - platform: ads_custom
    adsvar: GVL.pump
    name: Water Pump
```

Restart Home Assistant after editing YAML.

## Documentation

ðŸ“– **[Full documentation](docs/index.md)** â€” setup details, every entity type, services, data types, and troubleshooting

ðŸ“‹ **[Entity parameter reference](ENTITY_PARAMETERS.md)** â€” complete parameter tables for all seven entity types

ðŸ’¡ **[Example `configuration.yaml`](example_configuration.yaml)** â€” copy-paste YAML for every entity type

## Support

- [Report an issue](https://github.com/Aaroneisele55/homeassistant-ads/issues)
- [Home Assistant Community Forum](https://community.home-assistant.io/)

## Contributing

Contributions are welcome â€” see **[CONTRIBUTING.md](CONTRIBUTING.md)** for guidelines.

### Version Management

This project uses automated version management:
- See **[VERSION_MANAGEMENT.md](VERSION_MANAGEMENT.md)** for details on the versioning system
- Versions are automatically bumped based on commit messages or PR labels
- Always update `CHANGELOG.md` with your changes under the `[Unreleased]` section

## License

Apache License 2.0

## Credits

- Original integration by [@mrpasztoradam](https://github.com/mrpasztoradam)
- Built on the [pyads](https://github.com/stlehmann/pyads) library
